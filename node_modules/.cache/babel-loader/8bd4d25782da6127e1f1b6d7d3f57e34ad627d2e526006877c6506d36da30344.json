{"ast":null,"code":"var _jsxFileName = \"/home/project/src/components/RecentActivity.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport activityData from '../data/recentActivity.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Toast = ({\n  activity,\n  isExiting\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `fixed bottom-4 right-4 z-[9999] bg-white rounded-lg shadow-xl p-4 max-w-sm w-full transform ${isExiting ? 'animate-fade-out-down' : 'animate-fade-in-up'}`,\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-shrink-0\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-10 w-10 rounded-full bg-brand-600 flex items-center justify-center text-white font-bold\",\n        children: activity.name.charAt(0)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 10,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-3 w-0 flex-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm font-medium text-gray-900\",\n        children: activity.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-sm text-gray-500\",\n        children: [\"Purchased \", activity.product, \" from \", activity.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 text-xs text-gray-400\",\n        children: activity.timeAgo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 5,\n  columnNumber: 3\n}, this);\n_c = Toast;\nfunction shuffleArray(array) {\n  const newArray = [...array];\n  for (let i = newArray.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n  }\n  return newArray;\n}\n\n// Random delay between 40-60 seconds\nconst getRandomDelay = () => Math.floor(Math.random() * (60000 - 40000) + 40000);\nexport default function RecentActivity() {\n  _s();\n  const [activities, setActivities] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [batchIndex, setBatchIndex] = useState(0);\n  const [currentToast, setCurrentToast] = useState(null);\n  const [isExiting, setIsExiting] = useState(false);\n  const [isWaitingForDelay, setIsWaitingForDelay] = useState(false);\n  const lastShownName = useRef('');\n  const timeoutRef = useRef(null);\n  const initializeActivities = useCallback(() => {\n    setActivities(shuffleArray(activityData.activities));\n    setCurrentIndex(0);\n    setBatchIndex(0);\n  }, []);\n  useEffect(() => {\n    initializeActivities();\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [initializeActivities]);\n  const showNextToast = useCallback(() => {\n    if (isWaitingForDelay) return;\n    if (currentIndex >= activities.length) {\n      initializeActivities();\n      return;\n    }\n    let nextIndex = currentIndex;\n    while (nextIndex < activities.length && activities[nextIndex].name === lastShownName.current) {\n      nextIndex++;\n    }\n    if (nextIndex >= activities.length) {\n      initializeActivities();\n      return;\n    }\n    const activity = activities[nextIndex];\n    lastShownName.current = activity.name;\n    setCurrentToast(activity);\n    setIsExiting(false);\n    setCurrentIndex(nextIndex + 1);\n    setBatchIndex(prev => (prev + 1) % 4);\n    setIsWaitingForDelay(true);\n\n    // Start fade out after 4.7 seconds\n    timeoutRef.current = setTimeout(() => {\n      setIsExiting(true);\n\n      // Remove toast after animation completes\n      timeoutRef.current = setTimeout(() => {\n        setCurrentToast(null);\n\n        // Set up the random delay for the next toast\n        timeoutRef.current = setTimeout(() => {\n          setIsWaitingForDelay(false);\n        }, getRandomDelay());\n      }, 300);\n    }, 4700);\n  }, [activities, currentIndex, initializeActivities, isWaitingForDelay]);\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollPercent = window.scrollY / (document.documentElement.scrollHeight - window.innerHeight) * 100;\n      const milestones = [25, 50, 75, 100];\n      if (milestones.some(milestone => scrollPercent >= milestone)) {\n        if (!currentToast && batchIndex < 4 && !isWaitingForDelay) {\n          showNextToast();\n        }\n      }\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [currentToast, batchIndex, showNextToast, isWaitingForDelay]);\n  return currentToast ? /*#__PURE__*/_jsxDEV(Toast, {\n    activity: currentToast,\n    isExiting: isExiting\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 25\n  }, this) : null;\n}\n_s(RecentActivity, \"9Hoc73zub/WgQ6kQGTLMXVCxq5Y=\");\n_c2 = RecentActivity;\nvar _c, _c2;\n$RefreshReg$(_c, \"Toast\");\n$RefreshReg$(_c2, \"RecentActivity\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","activityData","jsxDEV","_jsxDEV","Toast","activity","isExiting","className","children","name","charAt","fileName","_jsxFileName","lineNumber","columnNumber","product","location","timeAgo","_c","shuffleArray","array","newArray","i","length","j","Math","floor","random","getRandomDelay","RecentActivity","_s","activities","setActivities","currentIndex","setCurrentIndex","batchIndex","setBatchIndex","currentToast","setCurrentToast","setIsExiting","isWaitingForDelay","setIsWaitingForDelay","lastShownName","timeoutRef","initializeActivities","current","clearTimeout","showNextToast","nextIndex","prev","setTimeout","handleScroll","scrollPercent","window","scrollY","document","documentElement","scrollHeight","innerHeight","milestones","some","milestone","addEventListener","removeEventListener","_c2","$RefreshReg$"],"sources":["/home/project/src/components/RecentActivity.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport activityData from '../data/recentActivity.json';\n\nconst Toast = ({ activity, isExiting }) => (\n  <div className={`fixed bottom-4 right-4 z-[9999] bg-white rounded-lg shadow-xl p-4 max-w-sm w-full transform ${\n    isExiting ? 'animate-fade-out-down' : 'animate-fade-in-up'\n  }`}>\n    <div className=\"flex items-center\">\n      <div className=\"flex-shrink-0\">\n        <div className=\"h-10 w-10 rounded-full bg-brand-600 flex items-center justify-center text-white font-bold\">\n          {activity.name.charAt(0)}\n        </div>\n      </div>\n      <div className=\"ml-3 w-0 flex-1\">\n        <p className=\"text-sm font-medium text-gray-900\">{activity.name}</p>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Purchased {activity.product} from {activity.location}\n        </p>\n        <p className=\"mt-1 text-xs text-gray-400\">{activity.timeAgo}</p>\n      </div>\n    </div>\n  </div>\n);\n\nfunction shuffleArray(array) {\n  const newArray = [...array];\n  for (let i = newArray.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];\n  }\n  return newArray;\n}\n\n// Random delay between 40-60 seconds\nconst getRandomDelay = () => Math.floor(Math.random() * (60000 - 40000) + 40000);\n\nexport default function RecentActivity() {\n  const [activities, setActivities] = useState([]);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [batchIndex, setBatchIndex] = useState(0);\n  const [currentToast, setCurrentToast] = useState(null);\n  const [isExiting, setIsExiting] = useState(false);\n  const [isWaitingForDelay, setIsWaitingForDelay] = useState(false);\n  const lastShownName = useRef('');\n  const timeoutRef = useRef(null);\n\n  const initializeActivities = useCallback(() => {\n    setActivities(shuffleArray(activityData.activities));\n    setCurrentIndex(0);\n    setBatchIndex(0);\n  }, []);\n\n  useEffect(() => {\n    initializeActivities();\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [initializeActivities]);\n\n  const showNextToast = useCallback(() => {\n    if (isWaitingForDelay) return;\n\n    if (currentIndex >= activities.length) {\n      initializeActivities();\n      return;\n    }\n\n    let nextIndex = currentIndex;\n    while (nextIndex < activities.length && activities[nextIndex].name === lastShownName.current) {\n      nextIndex++;\n    }\n\n    if (nextIndex >= activities.length) {\n      initializeActivities();\n      return;\n    }\n\n    const activity = activities[nextIndex];\n    lastShownName.current = activity.name;\n    setCurrentToast(activity);\n    setIsExiting(false);\n    setCurrentIndex(nextIndex + 1);\n    setBatchIndex((prev) => (prev + 1) % 4);\n    setIsWaitingForDelay(true);\n\n    // Start fade out after 4.7 seconds\n    timeoutRef.current = setTimeout(() => {\n      setIsExiting(true);\n      \n      // Remove toast after animation completes\n      timeoutRef.current = setTimeout(() => {\n        setCurrentToast(null);\n        \n        // Set up the random delay for the next toast\n        timeoutRef.current = setTimeout(() => {\n          setIsWaitingForDelay(false);\n        }, getRandomDelay());\n      }, 300);\n    }, 4700);\n  }, [activities, currentIndex, initializeActivities, isWaitingForDelay]);\n\n  useEffect(() => {\n    const handleScroll = () => {\n      const scrollPercent = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;\n      const milestones = [25, 50, 75, 100];\n      \n      if (milestones.some(milestone => scrollPercent >= milestone)) {\n        if (!currentToast && batchIndex < 4 && !isWaitingForDelay) {\n          showNextToast();\n        }\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [currentToast, batchIndex, showNextToast, isWaitingForDelay]);\n\n  return currentToast ? <Toast activity={currentToast} isExiting={isExiting} /> : null;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}